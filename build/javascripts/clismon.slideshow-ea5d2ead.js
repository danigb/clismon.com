!function(n){var t=[],i=-1,e=0;n.clismon=n.clismon||{},("undefined"==typeof console||"undefined"==typeof console.log)&&(console={log:function(){},debug:function(){}}),jQuery.fn.controls=function(){return this.each(function(){var t=n(this),i=!1;n(this).children("a").hover(function(){i=!0},function(){i=!1});var e=function(){i||t.fadeOut()},o=null;n(document).mousemove(function(){t.fadeIn("fast"),clearTimeout(o),o=setTimeout(e,500)}),t.fadeOut()})},n.extend(n.clismon,{background:function(t,i,e){var r=i/e;n("#wrap").append(o(t,function(){n(window).trigger("resize")}).attr("id","background")),n(window).resize(function(){var t=n(window).width(),o=n(window).height(),c=t/o,a=1;a=c>r?t/i:o/e,n("#background").css("height",e*a),n("#background").css("width",i*a)})},slideshow:{add:function(n,i,e,o,r){t.push({id:n,name:i,path:e,width:o,height:r})},start:function(){n(window).resize(function(){s()})},prev:function(){u(r())},next:function(){u(c())}}});var o=function(t,i){var e=n("<img />");return e.attr("src",t),e.bind("load",i),e},r=function(){var n=i-1;return 0>n&&(n=0),n},c=function(){var n=i+1;return n==t.length&&(n-=1),n};n.address.change(function(n){var t=n.value.substring(1);if(""==t)u(0);else{var i=t.split("-"),e=i[0];d(a(e))}});var a=function(n){for(var i=t.length,e=0;i>e;e++)if(t[e].id==n)return e;return 0},u=function(i){n.address.value(""+t[i].id+"-"+t[i].name)},d=function(r){if(i!=r){n("#background").css("opacity",1),n("#previous_slide").css("opacity",0==r?.3:1),n("#next_slide").css("opacity",r==t.length-1?.3:1),i=r;var c=e=t[r],a=o(c.path,function(){n("#background").css("opacity",.5),n("#placeholder img").fadeIn()});a.hide(),a.attr("id","current"),n("#placeholder").empty().append(a).attr("href",c.path),s()}},s=function(){var t=n("#placeholder img"),i=e.width,o=e.height,r=n(window).width()-20,c=n(window).height()-40,a=r/i,u=c/o,d=u>a?a:u;d=d>1?1:d;var s=o*d,f=i*d;t.css("height",s),t.css("width",f),t.css("margin-top",-.5*s-10),t.css("margin-left",-.5*f)};n(function(){n("a[rel*=external]").click(function(){return window.open(this.href),!1})})}(jQuery);